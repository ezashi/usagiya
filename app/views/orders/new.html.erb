<%= render 'shared/header' %>

<style>
    body {
        margin: 0;
        padding: 0;
        background: linear-gradient(to bottom, #fef3f2, #ffffff);
    }

    .order-page-container {
        padding-top: 140px;
        padding-bottom: 4rem;
        min-height: 100vh;
    }

    .wrapping-sample-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        border: 2px solid #e5e7eb;
    }

    /* ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    html {
        scroll-behavior: smooth;
    }

    /* æ³¨æ–‡ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®ãƒœã‚¿ãƒ³ */
    .scroll-to-form-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px 24px;
        background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        color: white;
        font-weight: bold;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(236, 72, 153, 0.3);
    }

    .scroll-to-form-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(236, 72, 153, 0.4);
    }
</style>

<div class="order-page-container">
    <!-- ä¸­å¤®é…ç½®ã®ã‚³ãƒ³ãƒ†ãƒŠ - å·¦å³ã«ä½™ç™½ã‚’ä½œæˆ -->
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">å†·å‡ã‚‚ã¡ãƒ‘ã‚¤æ³¨æ–‡</h1>
            <p class="text-gray-600">å¿…è¦äº‹é …ã‚’ã”å…¥åŠ›ãã ã•ã„</p>
        </div>

        <!-- å†·å‡ã‚‚ã¡ãƒ‘ã‚¤ç™ºé€ã«ã¤ã„ã¦ã®èª¬æ˜ -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8 border-l-4 border-pink-500 relative">
            <!-- å³ä¸Šã«æ³¨æ–‡ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®ãƒœã‚¿ãƒ³ -->
            <div class="absolute top-4 right-4">
                <a href="#order-form" class="scroll-to-form-btn">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                    </svg>
                    æ³¨æ–‡ãƒ•ã‚©ãƒ¼ãƒ ã¸
                </a>
            </div>

            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <svg class="w-6 h-6 mr-2 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                ã€Œã‚‚ã¡ãƒ‘ã‚¤ã€å†·å‡ç™ºé€ã«ã¤ã„ã¦
            </h2>

            <!-- èª¬æ˜æ–‡ã¨ç”»åƒã‚’æ¨ªä¸¦ã³ã«é…ç½® -->
            <div class="grid md:grid-cols-[1.5fr,1fr] gap-6 items-start">
                <!-- å·¦å´: èª¬æ˜æ–‡ -->
                <div class="text-gray-700 space-y-4 leading-relaxed">
                    <p>ã€Œã‚‚ã¡ãƒ‘ã‚¤ã®ç„¼ããŸã¦ã‚’å¬ã—ä¸ŠãŒã£ã¦ã„ãŸã ããŸã„ã€ãã‚“ãªæ€ã„ã§ä½œã£ã¦ã„ã¾ã™ã€‚</p>

                    <p>ã€Œé ãã®æ–¹ã«ã‚‚å¬ã—ä¸ŠãŒã£ã¦ã„ãŸã ããŸã„ã€ãã‚“ãªæ°—æŒã¡ã‚‚æŒã£ã¦ã„ã¾ã™ã€‚</p>

                    <p>ã‚‚ã¡ãƒ‘ã‚¤ã‚’ä½œã‚ŠãŸã¦ã€ç„¼ããŸã¦ã®ã¾ã¾ã€ãŠã„ã—ããŠå±Šã‘ã§ããªã„ã ã‚ã†ã‹...</p>

                    <p>...ã„ã‚ã„ã‚è€ƒãˆè©¦è¡ŒéŒ¯èª¤ã®æœ«ã€ä½œã‚ŠãŸã¦ã‚’æ€¥é€Ÿã«å†·å‡ç™ºé€ã—ã¦ãŠé€ã‚Šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

                    <div class="bg-pink-50 p-4 rounded-lg mt-6">
                        <p class="font-bold text-pink-800 mb-3">ã€Œã‚‚ã¡ãƒ‘ã‚¤ã€ç™ºé€ã®æµã‚Œ:</p>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘ </span>
                                <span>ã†ã•ãã‚„åº—èˆ—ã«ã¦ãƒ‘ã‚¤ã§åŒ…ã¿ç„¼ãã‚ã’ã¾ã™ã€‚</span>
                            </div>
                            <div class="text-center text-gray-500">â†“</div>
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘¡</span>
                                <span>æ€¥é€Ÿå†·å‡ã—ã¾ã™</span>
                            </div>
                            <div class="text-center text-gray-500">â†“</div>
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘¢</span>
                                <span>æ¢±åŒ…ã—ã¦ç™ºé€ã—ã¾ã™</span>
                            </div>
                            <div class="text-center text-gray-500">â†“</div>
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘£</span>
                                <span>ãŠå®¢æ§˜ã«ãŠå±Šã‘</span>
                            </div>
                            <div class="text-center text-gray-500">â†“</div>
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘¤</span>
                                <span>ãŠå¬ã—ä¸ŠãŒã‚Šã®ç´„2æ™‚é–“å‰ã«è‡ªç„¶è§£å‡ â†’ <span class="font-bold">â‘¥</span>ãã®ã¾ã¾ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„</span>
                            </div>
                            <div class="text-center text-gray-500">â†“</div>
                            <div class="flex items-start">
                                <span class="font-bold mr-2">â‘¥</span>
                                <span>ãƒˆãƒ¼ã‚¹ã‚¿ãƒ¼ã§ç´„2~3åˆ†ç„¼ã„ã¦ãŠå¬ã—ä¸ŠãŒã‚Šã„ãŸã ãã¨ä¸€å±¤ãŠã„ã—ããªã‚Šã¾ã™â™ª</span>
                            </div>
                        </div>

                        <div class="mt-4 pt-4 border-t border-pink-200">
                            <p class="text-sm">â˜†æ¶ˆè²»æœŸé™ã¯è§£å‡å‰...ç´„20æ—¥é–“</p>
                            <p class="text-sm ml-12">è§£å‡å¾Œ...ç¿Œæ—¥ä¸­</p>
                        </div>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mt-4">
                        <p class="text-red-800 font-bold text-sm">
                            âš ï¸ 2ã€œ3æ—¥å‰ã‚’æ–°è¦å—ã‘ä»˜ã‘ã§ãã¾ã›ã‚“ã€‚å¹´æœ«å¹´å§‹ã€é€£ä¼‘å‰ã¯1é€±é–“ã®ä½™è£•ãŒã”ã–ã„ã¾ã™ã®ã§ã€ãŠæ€¥ãã®æ–¹ã¯ãŠé›»è©±ã«ã¦ã”ç›¸è«‡ãã ã•ã„ã€‚
                        </p>
                        <p class="text-red-700 text-sm mt-2">TEL: 0778-62-0861</p>
                    </div>
                </div>

                <!-- å³å´: ç”»åƒ -->
                <div class="space-y-4">
                    <!-- å•†å“ç”»åƒ1: reitoumotipai.png -->
                    <% begin %>
                    <%= image_tag 'orders/reitoumotipai.png', 
                          alt: 'å†·å‡ã‚‚ã¡ãƒ‘ã‚¤', 
                          class: 'w-full rounded-lg shadow-md' %>
                    <% rescue => e %>
                    <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center">
                        <p class="text-gray-500 text-xs">ç”»åƒæœªé…ç½®: orders/reitoumotipai.png</p>
                    </div>
                    <% end %>

                    <!-- å•†å“ç”»åƒ2: reitou.png -->
                    <% begin %>
                    <%= image_tag 'orders/reitou.png', 
                          alt: 'å†·å‡ä¿å­˜', 
                          class: 'w-full rounded-lg shadow-md' %>
                    <% rescue => e %>
                    <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center">
                        <p class="text-gray-500 text-xs">ç”»åƒæœªé…ç½®: orders/reitou.png</p>
                    </div>
                    <% end %>

                    <!-- å•†å“ç”»åƒ3: housounashi_motipai.jpgï¼ˆå°‘ã—å¤§ãã‚ï¼‰ -->
                    <div class="mt-4">
                        <% begin %>
                        <%= image_tag 'orders/housounashi_motipai.jpg', 
                              alt: 'ã‚‚ã¡ãƒ‘ã‚¤å°‚ç”¨ç®±', 
                              class: 'w-full rounded-lg shadow-md' %>
                        <% rescue => e %>
                        <div class="w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center">
                            <p class="text-gray-500 text-xs">ç”»åƒæœªé…ç½®: orders/housounashi_motipai.jpg</p>
                        </div>
                        <% end %>
                    </div>
                </div>
            </div>

            <!-- å°‚ç”¨ç®±ã®èª¬æ˜ã‚’housounashi_motipai.jpgã®ä¸‹ã«é…ç½® -->
            <div class="mt-4 text-center">
                <p class="text-sm text-gray-700">
                    â€»ã‚‚ã¡ãƒ‘ã‚¤å°‚ç”¨ã®ç®±ã¯ã€6å€‹å…¥ã‚Šãƒ»8å€‹å…¥ã‚Šãƒ»10å€‹å…¥ã‚Šãƒ»12å€‹å…¥ã‚Šãƒ»15å€‹å…¥ã‚Šãƒ»20å€‹å…¥ã‚ŠãŒã”ã–ã„ã¾ã™ã€‚
                </p>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
        <div class="bg-white rounded-xl shadow-md p-4 mb-6">
            <div class="flex items-center justify-center gap-2">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-pink-600 text-white rounded-full flex items-center justify-center font-bold text-sm">1</div>
                    <span class="ml-2 font-bold text-gray-800 hidden sm:inline">å…¥åŠ›</span>
                </div>
                <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center font-bold text-sm">2</div>
                    <span class="ml-2 text-gray-500 hidden sm:inline">ç¢ºèª</span>
                </div>
                <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center font-bold text-sm">3</div>
                    <span class="ml-2 text-gray-500 hidden sm:inline">å®Œäº†</span>
                </div>
            </div>
        </div>

        <%= form_with model: @order, url: confirm_orders_path, method: :post, id: "order-form", class: "space-y-6" do |f| %>

        <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <% if @order.errors.any? %>
        <div class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded mb-6">
            <div class="flex items-center mb-2">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                </svg>
                <strong class="font-bold">å…¥åŠ›å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™:</strong>
            </div>
            <ul class="list-disc list-inside text-sm">
                <% @order.errors.full_messages.each do |message| %>
                <li><%= message %></li>
                <% end %>
            </ul>
        </div>
        <% end %>

        <!-- ã”æ³¨æ–‡è€…æ§˜æƒ…å ± -->
        <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-pink-500">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-2 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                ã”æ³¨æ–‡è€…æ§˜æƒ…å ±
            </h2>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        ãŠåå‰ <span class="text-red-600">*</span>
                    </label>
                    <%= f.text_field :customer_name, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "å±±ç”° å¤ªéƒ" %>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            éƒµä¾¿ç•ªå· <span class="text-red-600">*</span>
                        </label>
                        <%= f.text_field :postal_code, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "123-4567" %>
                        <p class="text-xs text-gray-500 mt-1">ãƒã‚¤ãƒ•ãƒ³ã‚ã‚Šãƒ»ãªã—ä¸¡å¯¾å¿œ</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            é›»è©±ç•ªå· <span class="text-red-600">*</span>
                        </label>
                        <%= f.text_field :phone, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "09012345678" %>
                        <p class="text-xs text-gray-500 mt-1">ãƒã‚¤ãƒ•ãƒ³ãªã—10æ¡ã¾ãŸã¯11æ¡</p>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        ã”ä½æ‰€ <span class="text-red-600">*</span>
                    </label>
                    <%= f.text_area :address, rows: 2, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "ç¦äº•çœŒé¯–æ±Ÿå¸‚æŒæ˜å¯ºç”º5-10-1" %>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-red-600">*</span>
                    </label>
                    <%= f.email_field :email, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent", placeholder: "example@email.com" %>
                </div>
            </div>
        </div>

        <!-- ãŠé€ã‚Šå…ˆæƒ…å ± -->
        <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                ãŠé€ã‚Šå…ˆ
            </h2>

            <div class="space-y-4">
                <div class="flex items-center space-x-4">
                    <label class="flex items-center">
                        <%= f.radio_button :same_address, true, checked: true, id: "same_address_true", class: "mr-2" %>
                        <span class="text-gray-700">ã”æ³¨æ–‡è€…æ§˜ã¨åŒã˜ä½æ‰€ã«é€ã‚‹</span>
                    </label>
                    <label class="flex items-center">
                        <%= f.radio_button :same_address, false, id: "same_address_false", class: "mr-2" %>
                        <span class="text-gray-700">åˆ¥ã®ä½æ‰€ã«é€ã‚‹</span>
                    </label>
                </div>

                <div id="delivery-address-fields" style="display: none;" class="space-y-4 pt-4 border-t border-gray-200">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            ãŠé€ã‚Šå…ˆã®ãŠåå‰ <span class="text-red-600">*</span>
                        </label>
                        <%= f.text_field :delivery_name, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "éˆ´æœ¨ èŠ±å­" %>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">
                                éƒµä¾¿ç•ªå· <span class="text-red-600">*</span>
                            </label>
                            <%= f.text_field :delivery_postal_code, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "123-4567" %>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">
                                é›»è©±ç•ªå· <span class="text-red-600">*</span>
                            </label>
                            <%= f.text_field :delivery_phone, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "09012345678" %>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            ä½æ‰€ <span class="text-red-600">*</span>
                        </label>
                        <%= f.text_area :delivery_address, rows: 2, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "æ±äº¬éƒ½æ¸‹è°·åŒº..." %>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ³¨æ–‡å•†å“ -->
        <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                </svg>
                æ³¨æ–‡å•†å“
            </h2>

            <div class="space-y-3">
                <%= f.fields_for :order_items do |item_form| %>
                <%= item_form.hidden_field :product_type %>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex-1">
                        <p class="font-medium text-gray-800">
                            <%= Order::PRODUCT_PRICES[item_form.object.product_type][:name] %>
                        </p>
                        <p class="text-sm text-gray-600">
                            Â¥<%= number_with_delimiter(Order::PRODUCT_PRICES[item_form.object.product_type][:price]) %>
                        </p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700">æ•°é‡:</label>
                        <%= item_form.number_field :quantity, min: 0, class: "w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-green-500 focus:border-transparent" %>
                    </div>
                </div>
                <% end %>
            </div>

            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <p class="text-sm text-blue-800">
                    <strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ã‚‚ã¡ãƒ‘ã‚¤ã¯çµ„ã¿åˆã‚ã›ãŒã§ãã¾ã™ã€‚ç¨®é¡ã¨å€‹æ•°ã®ã”å¸Œæœ›ã¯ä¸‹ã®ã€Œã”å¸Œæœ›æ¬„ã€ã«ã”è¨˜å…¥ãã ã•ã„ã€‚
                </p>
            </div>
        </div>

        <!-- ãŠæ”¯æ‰•ã„ãƒ»é…é€æƒ…å ± -->
        <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                </svg>
                ãŠæ”¯æ‰•ã„ãƒ»é…é€æƒ…å ±
            </h2>

            <div class="space-y-6">
                <!-- ãŠæ”¯æ‰•ã„æ–¹æ³• -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">
                        ãŠæ”¯æ‰•ã„æ–¹æ³• <span class="text-red-600">*</span>
                    </label>
                    <div class="space-y-2">
                        <% Order::PAYMENT_METHODS.each do |key, label| %>
                        <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <%= f.radio_button :payment_method, key, class: "mr-3" %>
                            <span class="text-gray-700"><%= label %></span>
                        </label>
                        <% end %>
                    </div>
                </div>

                <!-- åˆ°ç€å¸Œæœ›æ—¥ -->
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            åˆ°ç€å¸Œæœ›æ—¥
                        </label>
                        <%= f.date_field :delivery_date, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent", min: Date.today + 4 %>
                        <p class="text-xs text-gray-500 mt-1">4æ—¥å¾Œä»¥é™ã§é¸æŠã—ã¦ãã ã•ã„</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">
                            å¸Œæœ›åˆ°ç€æ™‚é–“
                        </label>
                        <%= f.select :delivery_time, Order::DELIVERY_TIMES, { include_blank: "é¸æŠã—ã¦ãã ã•ã„" }, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" %>
                    </div>
                </div>

                <!-- åŒ…è£…ã®æœ‰ç„¡ -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-3">
                        åŒ…è£…ã®æœ‰ç„¡ <span class="text-red-600">*</span>
                    </label>
                    <div class="grid md:grid-cols-2 gap-4">
                        <% Order::WRAPPING_OPTIONS.each do |key, label| %>
                        <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                            <%= f.radio_button :wrapping_type, key, class: "mr-3" %>
                            <span class="text-gray-700"><%= label %></span>
                        </label>
                        <% end %>
                    </div>

                    <!-- åŒ…è£…ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ -->
                    <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-3">
                        <% begin %>
                        <%= image_tag 'orders/housounashi.jpg', alt: 'åŒ…è£…ãªã—', class: 'wrapping-sample-image' %>
                        <% rescue %>
                        <div class="wrapping-sample-image bg-gray-200 flex items-center justify-center text-xs text-gray-500">åŒ…è£…ãªã—</div>
                        <% end %>

                        <% begin %>
                        <%= image_tag 'orders/logo_red.jpg', alt: 'ãƒ­ã‚´èµ¤', class: 'wrapping-sample-image' %>
                        <% rescue %>
                        <div class="wrapping-sample-image bg-gray-200 flex items-center justify-center text-xs text-gray-500">ãƒ­ã‚´èµ¤</div>
                        <% end %>

                        <% begin %>
                        <%= image_tag 'orders/logo_blue.jpg', alt: 'ãƒ­ã‚´é’', class: 'wrapping-sample-image' %>
                        <% rescue %>
                        <div class="wrapping-sample-image bg-gray-200 flex items-center justify-center text-xs text-gray-500">ãƒ­ã‚´é’</div>
                        <% end %>

                        <% begin %>
                        <%= image_tag 'orders/rabbit_pink.jpg', alt: 'ã†ã•ãæŸ„', class: 'wrapping-sample-image' %>
                        <% rescue %>
                        <div class="wrapping-sample-image bg-gray-200 flex items-center justify-center text-xs text-gray-500">ã†ã•ãæŸ„</div>
                        <% end %>
                    </div>
                </div>

                <!-- ã”å¸Œæœ›æ¬„ -->
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        ã”å¸Œæœ›æ¬„
                    </label>
                    <%= f.text_area :notes, rows: 4, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent", placeholder: "â€»ã‚‚ã¡ãƒ‘ã‚¤ã¯çµ„ã¿åˆã‚ã›ãŒã§ãã¾ã™ã®ã§ã€ç¨®é¡ã¨å€‹æ•°ã‚’ã”è¨˜å…¥ãã ã•ã„ã€‚(ã”è¨˜å…¥ãŒãªã„å ´åˆã¯ãŠã¾ã‹ã›ã¨ãªã‚Šã¾ã™)\nâ€»åŒ…è£…ã®å ´åˆã€ç†¨æ–—ã®æœ‰ç„¡(ãŠåå‰ã®è¨˜å…¥)ã‚‚ã‚ã‚Œã°ã”è¨˜å…¥ãã ã•ã„ã€‚\nâ€»æ‰‹æã’è¢‹ãŒå¿…è¦ãªæ–¹ã¯ã”è¨˜å…¥ãã ã•ã„ã€‚" %>
                </div>
            </div>
        </div>

        <!-- ç¢ºèªãƒœã‚¿ãƒ³ -->
        <div class="flex justify-center">
            <%= f.submit "å…¥åŠ›å†…å®¹ã‚’ç¢ºèªã™ã‚‹", class: "px-8 py-4 bg-pink-600 text-white text-lg font-bold rounded-lg hover:bg-pink-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1 cursor-pointer" %>
        </div>

        <% end %>
    </div>
</div>

<script>
    // åˆ¥ä½æ‰€ã¸ã®é…é€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¡¨ç¤º/éè¡¨ç¤º
    document.addEventListener('DOMContentLoaded', function() {
        const sameAddressTrue = document.getElementById('same_address_true');
        const sameAddressFalse = document.getElementById('same_address_false');
        const deliveryFields = document.getElementById('delivery-address-fields');

        function toggleDeliveryFields() {
            if (sameAddressFalse && sameAddressFalse.checked) {
                deliveryFields.style.display = 'block';
            } else {
                deliveryFields.style.display = 'none';
            }
        }

        if (sameAddressTrue) sameAddressTrue.addEventListener('change', toggleDeliveryFields);
        if (sameAddressFalse) sameAddressFalse.addEventListener('change', toggleDeliveryFields);

        // åˆæœŸè¡¨ç¤º
        toggleDeliveryFields();
    });
</script>