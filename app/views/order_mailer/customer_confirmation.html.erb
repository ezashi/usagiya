<!DOCTYPE html>
<html>

<head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'ヒラギノ角ゴ ProN W3', Meiryo, メイリオ, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background-color: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #ec4899;
        }

        .content {
            padding: 30px 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .total-row {
            font-weight: bold;
            font-size: 1.1em;
            background-color: #fff3e0;
        }

        .info-section {
            margin: 30px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }

        .footer {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            text-align: center;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1 style="color: #ec4899; margin: 0;">御菓子処うさぎや</h1>
            <p style="margin: 10px 0 0 0;">ご注文ありがとうございます</p>
        </div>

        <div class="content">
            <p><%= @order.customer_name %> 様</p>

            <p>
                この度は、御菓子処うさぎやをご利用いただき、誠にありがとうございます。<br>
                以下の内容でご注文を承りました。
            </p>

            <!-- 注文内容 -->
            <h2 style="color: #ec4899; border-bottom: 2px solid #ec4899; padding-bottom: 5px;">ご注文内容</h2>
            <table>
                <thead>
                    <tr>
                        <th>商品名</th>
                        <th style="text-align: right;">数量</th>
                        <th style="text-align: right;">単価</th>
                        <th style="text-align: right;">小計</th>
                    </tr>
                </thead>
                <tbody>
                    <% @order.order_items.each do |item| %>
                    <tr>
                        <td><%= item.product_name %></td>
                        <td style="text-align: right;"><%= item.quantity %>個</td>
                        <td style="text-align: right;">¥<%= number_with_delimiter(item.unit_price) %></td>
                        <td style="text-align: right;">¥<%= number_with_delimiter(item.subtotal) %></td>
                    </tr>
                    <% end %>
                </tbody>
                <tfoot>
                    <tr class="total-row">
                        <td colspan="3" style="text-align: right;">合計金額</td>
                        <td style="text-align: right;">¥<%= number_with_delimiter(@order.total_amount) %></td>
                    </tr>
                </tfoot>
            </table>

            <!-- 注文者情報 -->
            <div class="info-section">
                <h3 style="margin-top: 0; color: #ec4899;">ご注文者様情報</h3>
                <p>
                    お名前: <%= @order.customer_name %><br>
                    郵便番号: <%= @order.postal_code %><br>
                    ご住所: <%= @order.address %><br>
                    電話番号: <%= @order.phone %><br>
                    メールアドレス: <%= @order.email %>
                </p>
            </div>

            <!-- 配送先情報 -->
            <div class="info-section">
                <h3 style="margin-top: 0; color: #ec4899;">お届け先情報</h3>
                <% if @order.same_address? %>
                <p>ご注文者様と同じ</p>
                <% else %>
                <p>
                    お名前: <%= @order.delivery_name %><br>
                    郵便番号: <%= @order.delivery_postal_code %><br>
                    ご住所: <%= @order.delivery_address %><br>
                    電話番号: <%= @order.delivery_phone %>
                </p>
                <% end %>

                <% if @order.delivery_date.present? %>
                <p>到着希望日: <%= @order.delivery_date.strftime('%Y年%m月%d日') %></p>
                <% end %>

                <% if @order.delivery_time.present? %>
                <p>希望到着時間: <%= @order.delivery_time %></p>
                <% end %>
            </div>

            <!-- 支払い・包装情報 -->
            <div class="info-section">
                <h3 style="margin-top: 0; color: #ec4899;">お支払い・包装</h3>
                <p>
                    お支払い方法: <%= @order.payment_method_label %><br>
                    包装: <%= @order.wrapping_type_label %>
                </p>

                <% if @order.notes.present? %>
                <h4>ご希望内容</h4>
                <p style="white-space: pre-line;"><%= @order.notes %></p>
                <% end %>
            </div>

            <div style="background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px; margin: 20px 0;">
                <p style="margin: 0;">
                    <strong>※ご注意</strong><br>
                    2~3日以内に当店よりご連絡させていただきます。<br>
                    万が一、3日を過ぎてもご連絡がない場合は、お手数ですがお電話にてお問い合わせください。
                </p>
            </div>

            <p>
                ご不明な点がございましたら、下記までお問い合わせください。<br>
                今後ともどうぞよろしくお願いいたします。
            </p>
        </div>

        <div class="footer">
            <p>
                <strong>御菓子処うさぎや</strong><br>
                〒916-0071 福井県鯖江市持明寺町5-10-1<br>
                TEL: 0778-62-0861<br>
                営業時間: 平日・土曜日 9:00~18:00<br>
                定休日: 日曜日(月曜日に不定休あり)
            </p>
            <p style="margin-top: 15px; font-size: 0.8em; color: #999;">
                このメールに心当たりのない方は、お手数ですが削除していただきますようお願いいたします。
            </p>
        </div>
    </div>
</body>

</html>