<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900">商品管理</h1>
        <%= link_to "新規商品登録", new_admin_product_path, class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition" %>
    </div>

    <% if notice %>
    <div class="mb-4 p-4 bg-green-50 border border-green-200 text-green-800 rounded-lg">
        <%= notice %>
    </div>
    <% end %>

    <!-- 商品一覧テーブル -->
    <div class="bg-white rounded-lg shadow overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">画像</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品名</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">価格</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">カテゴリ</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">表示順</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状態</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <% @products.each do |product| %>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <%= image_tag product.image_path, class: "h-16 w-16 object-cover rounded", alt: product.name %>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900"><%= product.name %></div>
                        <% if product.featured %>
                        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800">
                            注目
                        </span>
                        <% end %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ¥<%= number_with_delimiter(product.price) %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <%= product.category_name %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <%= product.display_order %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <% if product.visible %>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            表示中
                        </span>
                        <% else %>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                            非表示
                        </span>
                        <% end %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <%= link_to "編集", edit_admin_product_path(product), class: "text-blue-600 hover:text-blue-900" %>
                        <%= button_to product.visible? ? "非表示" : "表示", 
                  toggle_visibility_admin_product_path(product), 
                  method: :patch,
                  class: "text-yellow-600 hover:text-yellow-900" %>
                        <%= button_to "削除", admin_product_path(product), 
                  method: :delete,
                  data: { confirm: "本当に削除しますか?" },
                  class: "text-red-600 hover:text-red-900" %>
                    </td>
                </tr>
                <% end %>
            </tbody>
        </table>
    </div>

    <!-- ページネーション -->
    <div class="mt-6">
        <%= paginate @products %>
    </div>
</div>